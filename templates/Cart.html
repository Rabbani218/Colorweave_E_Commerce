{% extends "base.html" %}

{% block title %}Your Cart - ColorWeave{% endblock %}

{% block content %}
<header class="header cart-header">
    <div class="container">
        <h1>ğŸ›’ Your Shopping Cart</h1>
        <p>Review your selected items before checkout!</p>
    </div>
</header>

<section class="cart-section">
    <div class="container">
        {% if cart_items %}
        <table class="cart-table">
            <thead>
                <tr>
                    <th>ğŸ“¸ Image</th>
                    <th>ğŸ›ï¸ Product Name</th>
                    <th>ğŸ’² Price</th>
                    <th>ğŸ”¢ Quantity</th>
                    <th>ğŸ—‘ï¸ Remove</th>
                </tr>
            </thead>
            <tbody>
                {% for item in cart_items %}
                <tr>
                    <td><img src="{{ url_for('static', filename=item.image) }}" alt="{{ item.name }}" class="cart-image"></td>
                    <td><a href="{{ url_for('product_detail', product_id=item.id) }}">{{ item.name }}</a></td>
                    <td>Rp {{ item.price }}</td>
                    <td>
                        <form action="{{ url_for('update_cart', item_id=item.id) }}" method="POST">
                            <input type="number" name="quantity" value="{{ item.quantity }}" min="1" required>
                            <button type="submit" class="btn-update">Update</button>
                        </form>
                    </td>
                    <td>
                        <a href="{{ url_for('remove_from_cart', item_id=item.id) }}" class="btn-remove">Remove</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div class="cart-total">
            <h3>Total: ğŸ’° Rp {{ cart_total }}</h3>
        </div>
        <div class="cart-actions">
            <a href="/products" class="btn btn-dark">â¬…ï¸ Continue Shopping</a>
            <a href="https://wa.me/+6281389922040?text=Halo%20ColorWeave%2C%20saya%20ingin%20melakukan%20checkout%20untuk%20pesanan%20saya.%20Total%20belanja%20saya%20adalah%20Rp%20{{ cart_total }}.%0AProduk%20yang%20saya%20beli%3A%0A{% for item in cart_items %}{{ item.name }}%20x%20{{ item.quantity }}%0A{% endfor %}" 
               class="btn btn-buy" 
               target="_blank">ğŸ›’ Checkout</a>
        </div>
        {% else %}
        <div class="empty-cart">
            <p>Your cart is currently empty. ğŸ›ï¸ Start shopping now!</p>
            <a href="/products" class="btn btn-buy">ğŸ›’ Shop Now</a>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
